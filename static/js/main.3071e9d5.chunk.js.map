{"version":3,"sources":["App/toGeoJson.ts","App/setCluster.ts","App/Links.tsx","App/distance-label.ts","App/Shop.tsx","App/Map.tsx","App/Home.tsx","App/ShopListItem.tsx","App/List.tsx","geolocation.ts","App/AboutUs.tsx","App/Category.tsx","App/Images.tsx","App/Knowledge.tsx","App/Tabbar.tsx","lib/zen2han.ts","lib/table2json.ts","App.tsx","Qrcode.tsx","App/Share.tsx","About.tsx","Container.tsx","serviceWorkerRegistration.ts","index.tsx"],"names":["toGeoJson","data","geojson","type","features","id","item","feature","geometry","coordinates","Number","properties","_id","i","Object","keys","length","key","push","setCluster","map","addLayer","source","filter","paint","layout","on","e","queryRenderedFeatures","point","layers","clusterId","cluster_id","getSource","getClusterExpansionZoom","err","zoom","easeTo","center","getCanvas","style","cursor","noop","stopPropagation","Content","props","className","href","onClick","size","makeDistanceLabelText","distance","distanceTipText","isNaN","Math","round","mapNode","React","useRef","useState","setMap","shop","clickHandler","close","current","remove","useEffect","nextMap","window","geolonia","Map","container","interactive","category","content","IconButton","color","Typography","gutterBottom","variant","component","to","margin","src","alt","width","wordBreak","display","text","result","split","line","undefined","toBreakLine","ref","height","marginTop","CSS","position","hidePoiLayers","hideLayers","layerId","setLayoutProperty","parseHash","url","qstr","location","hash","substring","URLSearchParams","mapObject","setMapObject","setShop","zLatLngString","setZLatLngString","addSource","cluster","clusterMaxZoom","clusterRadius","event","addMarkers","q","set","toString","replace","bounds","geojsonExtent","fitBoundsOptions","padding","get","zlatlng","lat","lng","flyTo","fitBounds","onMapLoad","getCenter","rawZoom","getZoom","precision","ceil","LN2","log","LN10","m","pow","zStr","orienteationchangeHandler","resize","addEventListener","removeEventListener","off","image","isCategoryPage","queryCategory","Card","sx","maxWidth","bgcolor","CardActionArea","popupHandler","CardMedia","CardContent","CardActions","Button","sortShopList","shopList","a","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","error","enableHighAccuracy","timeout","maximumAge","currentPosition","from","turf","sortingShopList","parseFloat","units","sort","b","setData","list","setList","page","setPage","hasMore","setHasMore","useSearchParams","isMounted","then","sortedData","slice","loader","textAlign","top","dataLength","next","scrollableTarget","index","process","target","rel","navigate","useNavigate","categoryList","setCategoryList","categories","indexOf","FormControl","fullWidth","onChange","value","options","label","validImageList","setValidImageList","imageListItems","ImageListItem","loading","onError","parentNode","ImageList","cols","rowHeight","theme","zen2han","str","s","String","fromCharCode","charCodeAt","table2json","table","header","record","reduce","prev","column","item1","item2","Date","parse","App","setShopList","fetch","getTime","response","ok","status","fetchedData","JSON","console","values","nextShopList","match","sortedShopList","path","element","Home","Knowledge","Qrcode","Canvas","useQRCode","TwitterShareButton","hashtags","config","title","TwitterIcon","FacebookShareButton","hashtag","FacebookIcon","LineShareButton","LineIcon","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","document","getElementById","URL","origin","headers","contentType","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.3071e9d5.chunk.js","sourcesContent":["type Geometry = {\n  type: string;\n  coordinates: number[]\n}\n\ntype featureProperties = {\n  [key: string]: string;\n}\n\ntype Feature = {\n  type: string;\n  geometry: Geometry;\n  properties: featureProperties\n}\n\ntype itemObject = {\n  [key: string]: any;\n}\n\ntype GeoJSON = {\n  type: string;\n  features: Feature[]\n}\n\nconst toGeoJson = (data: any) => {\n  const geojson = {\n    type: \"FeatureCollection\",\n    features: []\n  } as GeoJSON\n\n  for (const id in data) {\n    const item = data[id] as itemObject\n\n    if (!item['経度'] || !item['緯度'] || !item['スポット名']) {\n      return;\n    }\n\n    const feature = {\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [Number(item['経度']), Number(item['緯度'])]\n      },\n      properties: {_id: id}\n    } as Feature\n\n    for (let i = 0; i < Object.keys(item).length; i++) {\n      const key = Object.keys(item)[i]\n      feature.properties[key] = item[key]\n    }\n\n    geojson.features.push(feature)\n  }\n\n  return geojson\n}\n\nexport default toGeoJson;\n","const setCluster = (map: any) => {\n  map.addLayer({\n    id: 'clusters',\n    type: 'circle',\n    source: 'shops',\n    filter: ['has', 'point_count'],\n    paint: {\n      'circle-radius': 20,\n      'circle-color': '#FF0000',\n      'circle-opacity': 1.0,\n    },\n  })\n\n  map.addLayer({\n    id: 'cluster-count',\n    type: 'symbol',\n    source: 'shops',\n    filter: ['has', 'point_count'],\n    paint: {\n      'text-color': '#FFFFFF',\n    },\n    layout: {\n      'text-field': '{point_count_abbreviated} 件',\n      'text-size': 12,\n      'text-font': ['Noto Sans Regular'],\n    },\n  })\n\n  map.on('click', 'clusters', (e: any) => {\n    const features = map.queryRenderedFeatures(e.point, { layers: ['clusters'] })\n    const clusterId = features[0].properties.cluster_id\n    map.getSource('shops').getClusterExpansionZoom(clusterId, (err: any, zoom: number) => {\n      if (err)\n        return\n\n      map.easeTo({\n        center: features[0].geometry.coordinates,\n        zoom: zoom,\n      })\n    })\n  })\n\n  map.on('mouseenter', 'clusters', function () {\n    map.getCanvas().style.cursor = 'pointer'\n  })\n\n  map.on('mouseleave', 'clusters', function () {\n    map.getCanvas().style.cursor = ''\n  })\n}\n\nexport default setCluster;\n","import React from \"react\";\nimport { FaTwitter, FaInstagram, FaHome } from 'react-icons/fa';\n\nimport './Links.scss'\n\ntype Props = {\n  data: Pwamap.ShopData;\n};\n\nconst noop = (e: React.MouseEvent) => {\n  e.stopPropagation()\n}\n\nconst Content = (props: Props) => {\n\n  return (\n    <div className=\"links\">\n      {props.data['Instagram']?<div className=\"link\"><a href={`https://instagram.com/${props.data['Instagram']}`}><FaInstagram onClick={noop} size=\"20px\" /></a></div>:''}\n      {props.data['Twitter']?<div className=\"link\"><a href={`https://twitter.com/${props.data['Twitter']}`}><FaTwitter onClick={noop} size=\"20px\" /></a></div>:''}\n      {props.data['公式サイト']?<div className=\"link\"><a href={props.data['公式サイト']}><FaHome onClick={noop} size=\"20px\" /></a></div>:''}\n    </div>\n  );\n};\n\nexport default Content;\n","export const makeDistanceLabelText = (distance: number | void) => {\n  let distanceTipText = \"\"\n  if(typeof distance === 'number' && !Number.isNaN(distance)) {\n    if(distance > 1000) {\n      distanceTipText = Math.round(distance / 1000) + ' km'\n    } else {\n      distanceTipText = Math.round(distance) + ' m'\n    }\n  }\n  return distanceTipText\n}\n","import React from \"react\";\nimport Links from \"./Links\";\nimport \"./Shop.scss\";\nimport { Link } from \"react-router-dom\";\nimport { makeDistanceLabelText } from \"./distance-label\";\nimport { IconButton, Typography } from \"@material-ui/core\";\nimport { AiOutlineClose } from \"react-icons/ai\";\n\ntype Props = {\n  shop: Pwamap.ShopData;\n  close: Function;\n};\n\nconst Content = (props: Props) => {\n  const mapNode = React.useRef<HTMLDivElement>(null);\n  const [map, setMap] = React.useState<any>(null);\n  const { shop } = props;\n\n  const clickHandler = () => {\n    props.close();\n    if (mapNode.current) {\n      mapNode.current.remove();\n      map.remove();\n    }\n  };\n\n  React.useEffect(() => {\n    if (!mapNode.current) {\n      return;\n    }\n\n    // @ts-ignore\n    const nextMap = new window.geolonia.Map({\n      container: mapNode.current,\n      interactive: false,\n      zoom: 14,\n      // style: `geolonia/gsi`,\n      // style:\n      //   \"https://api.maptiler.com/maps/52fe0485-5021-4bcb-9bb1-7ccecdbe11e4/style.json?key=pNZ57kRwS9dOIeGPTCct\",\n      style:\n        \"https://api.maptiler.com/maps/52fe0485-5021-4bcb-9bb1-7ccecdbe11e4/style.json?key=pNZ57kRwS9dOIeGPTCct\",\n    });\n    setMap(nextMap);\n  }, [shop, mapNode]);\n\n  const distanceTipText = makeDistanceLabelText(shop.distance);\n  const category = shop[\"カテゴリ\"];\n  const content = shop[\"紹介文\"];\n\n  const toBreakLine = (text: string) => {\n    let result: any = \"\";\n    if (text !== void 0) {\n      return text.split(/(\\r\\n)|(\\n)|(\\r)/g).map((line, i) => {\n        if (line === \"\\r\\n\" || line === \"\\n\" || line === \"\\r\") {\n          result = <br key={i} />;\n        } else if (line !== undefined) {\n          result = line;\n        }\n\n        return result;\n      });\n    }\n    return result;\n  };\n\n  return (\n    <div className=\"shop-single\">\n      <div className=\"head\">\n        <IconButton onClick={clickHandler} aria-label=\"close\" color=\"secondary\">\n          <AiOutlineClose size=\"16px\" color=\"#FFFFFF\" />\n        </IconButton>\n      </div>\n      <div className=\"container\">\n        {shop ? (\n          <>\n            <Typography\n              gutterBottom\n              variant=\"h4\"\n              component=\"div\"\n              color=\"common.white\"\n            >\n              {shop[\"スポット名\"]}\n            </Typography>\n            <div>\n              <span className=\"nowrap\">\n                <Link to={`/list?category=${category}`}>\n                  <span onClick={clickHandler} className=\"category\">\n                    {category}\n                  </span>\n                </Link>\n              </span>\n              <span className=\"nowrap\">\n                {distanceTipText && (\n                  <span className=\"distance\">\n                    現在位置から {distanceTipText}\n                  </span>\n                )}\n              </span>\n            </div>\n\n            <div style={{ margin: \"24px 0\" }}>\n              <Links data={shop} />\n            </div>\n\n            {shop[\"画像\"] && (\n              <img\n                src={shop[\"画像\"]}\n                alt={shop[\"スポット名\"]}\n                style={{ width: \"100%\" }}\n              />\n            )}\n\n            {/* <p style={{ margin: \"24px 0\", wordBreak: \"break-all\" }}>\n              {toBreakLine(content)}\n            </p> */}\n            <Typography\n              style={{ margin: \"24px 0\", wordBreak: \"break-all\" }}\n              gutterBottom\n              variant=\"button\"\n              display=\"block\"\n              color=\"common.white\"\n            >\n              {toBreakLine(content)}\n            </Typography>\n\n            <div\n              ref={mapNode}\n              style={{ width: \"100%\", height: \"200px\", marginTop: \"24px\" }}\n              data-lat={shop[\"緯度\"]}\n              data-lng={shop[\"経度\"]}\n              data-navigation-control=\"off\"\n            ></div>\n\n            <p>\n              <a\n                className=\"small\"\n                href={`http://maps.apple.com/?q=${shop[\"緯度\"]},${shop[\"経度\"]}`}\n              >\n                スポットまでの道順\n              </a>\n            </p>\n          </>\n        ) : (\n          <></>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\n// @ts-ignore\nimport geojsonExtent from '@mapbox/geojson-extent'\nimport toGeoJson from './toGeoJson'\nimport setCluster from './setCluster'\nimport Shop from './Shop'\n\ntype Props = {\n  data: Pwamap.ShopData[];\n};\n\nconst CSS: React.CSSProperties = {\n  width: '100%',\n  height: '100%',\n  position: 'relative',\n}\n\nconst hidePoiLayers = (map: any) => {\n\n  const hideLayers = [\n    'poi',\n    'poi-primary',\n    'poi-r0-r9',\n    'poi-r10-r24',\n    'poi-r25',\n    'poi-bus',\n    'poi-entrance',\n  ]\n\n  for (let i = 0; i < hideLayers.length; i++) {\n    const layerId = hideLayers[i];\n    map.setLayoutProperty(layerId, 'visibility', 'none')\n  }\n}\n\nconst parseHash = (url?: Location | URL) => {\n  const qstr = (url || window.location).hash.substring(2);\n  const q = new URLSearchParams(qstr);\n  return q;\n};\n\nconst updateHash = (q: URLSearchParams) => {\n\n  const hash = q.toString();\n  if (hash) {\n    window.location.hash = `#/?${q.toString().replace(/%2F/g, '/')}`;\n  }\n};\n\nconst Content = (props: Props) => {\n  const mapNode = React.useRef<HTMLDivElement>(null);\n  const [mapObject, setMapObject] = React.useState<any>()\n  const [shop, setShop] = React.useState<Pwamap.ShopData | undefined>(undefined)\n  const [ zLatLngString, setZLatLngString ] = React.useState<string>('');\n\n  const addMarkers = (mapObject: any, data: any) => {\n\n    if (!mapObject || !data) {\n      return\n    }\n\n    mapObject.on('render', () => {\n\n      // nothing to do if shops exists.\n      if (mapObject.getSource('shops')) {\n        return\n      }\n\n      hidePoiLayers(mapObject)\n\n      const textColor = '#000000'\n      const textHaloColor = '#FFFFFF'\n\n      const geojson = toGeoJson(data)\n\n      mapObject.addSource('shops', {\n        type: 'geojson',\n        data: geojson,\n        cluster: true,\n        clusterMaxZoom: 14,\n        clusterRadius: 25,\n      })\n\n      mapObject.addLayer({\n        id: 'shop-points',\n        type: 'circle',\n        source: 'shops',\n        filter: ['all',\n          ['==', '$type', 'Point'],\n        ],\n        paint: {\n          'circle-radius': 13,\n          'circle-color': '#FF0000',\n          'circle-opacity': 0.4,\n          'circle-stroke-width': 2,\n          'circle-stroke-color': '#FFFFFF',\n          'circle-stroke-opacity': 1,\n        },\n      })\n\n      mapObject.addLayer({\n        id: 'shop-symbol',\n        type: 'symbol',\n        source: 'shops',\n        filter: ['all',\n          ['==', '$type', 'Point'],\n        ],\n        paint: {\n          'text-color': textColor,\n          'text-halo-color': textHaloColor,\n          'text-halo-width': 2,\n        },\n        layout: {\n          'text-field': \"{スポット名}\",\n          'text-font': ['Noto Sans Regular'],\n          'text-variable-anchor': ['top', 'bottom', 'left', 'right'],\n          'text-radial-offset': 0.5,\n          'text-justify': 'auto',\n          'text-size': 12,\n          'text-anchor': 'top',\n          'text-max-width': 12,\n          'text-allow-overlap': false,\n        },\n      })\n\n      mapObject.on('mouseenter', 'shop-points', () => {\n        mapObject.getCanvas().style.cursor = 'pointer'\n      })\n\n      mapObject.on('mouseleave', 'shop-points', () => {\n        mapObject.getCanvas().style.cursor = ''\n      })\n\n      mapObject.on('mouseenter', 'shop-symbol', () => {\n        mapObject.getCanvas().style.cursor = 'pointer'\n      })\n\n      mapObject.on('mouseleave', 'shop-symbol', () => {\n        mapObject.getCanvas().style.cursor = ''\n      })\n\n      mapObject.on('click', 'shop-points', (event: any) => {\n        if (!event.features[0].properties.cluster) {\n          setShop(event.features[0].properties)\n        }\n      })\n\n      mapObject.on('click', 'shop-symbol', (event: any) => {\n        if (!event.features[0].properties.cluster) {\n          setShop(event.features[0].properties)\n        }\n      })\n\n      setCluster(mapObject)\n\n\n    });\n\n  }\n\n  React.useEffect(() => {\n\n    addMarkers(mapObject, props.data)\n\n  }, [mapObject, props.data])\n\n  React.useEffect(() => {\n    const hash = parseHash();\n    if (zLatLngString) {\n      hash.set('map', zLatLngString);\n    }\n    updateHash(hash);\n\n  }, [ zLatLngString ]);\n\n  React.useEffect(() => {\n    // Only once reder the map.\n    if (!mapNode.current || mapObject) {\n      return\n    }\n\n    // @ts-ignore\n    const { geolonia } = window;\n\n    const geojson = toGeoJson(props.data)\n    const bounds = geojsonExtent(geojson)\n\n    const map = new geolonia.Map({\n      container: mapNode.current,\n      // style: 'geolonia/gsi',\n      // style: 'https://api.maptiler.com/maps/52fe0485-5021-4bcb-9bb1-7ccecdbe11e4/style.json?key=pNZ57kRwS9dOIeGPTCct',\n      style: 'https://api.maptiler.com/maps/52fe0485-5021-4bcb-9bb1-7ccecdbe11e4/style.json?key=pNZ57kRwS9dOIeGPTCct',\n      bounds: bounds,\n      fitBoundsOptions: { padding: 50 },\n    });\n\n    const hash = parseHash();\n    if (hash && hash.get('map')) {\n\n      const latLngString = hash.get('map') || '';\n      const zlatlng = latLngString.split('/');\n\n      const zoom = zlatlng[0]\n      const lat = zlatlng[1]\n      const lng = zlatlng[2]\n\n      map.flyTo({center: [lng, lat], zoom});\n\n    } else if (bounds) {\n\n      map.fitBounds(bounds, { padding: 50 })\n\n    }\n\n    const onMapLoad = () => {\n      hidePoiLayers(map)\n      setMapObject(map)\n\n      map.on('moveend', () => {\n        // see: https://github.com/maplibre/maplibre-gl-js/blob/ba7bfbc846910c5ae848aaeebe4bde6833fc9cdc/src/ui/hash.js#L59\n        const center = map.getCenter(),\n          rawZoom = map.getZoom(),\n          zoom = Math.round(rawZoom * 100) / 100,\n          // derived from equation: 512px * 2^z / 360 / 10^d < 0.5px\n          precision = Math.ceil((zoom * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10),\n          m = Math.pow(10, precision),\n          lng = Math.round(center.lng * m) / m,\n          lat = Math.round(center.lat * m) / m,\n          zStr = Math.ceil(zoom);\n\n        setZLatLngString(`${zStr}/${lat}/${lng}`);\n      });\n    }\n\n    const orienteationchangeHandler = () => {\n      map.resize()\n    }\n\n    // attach\n    map.on('load', onMapLoad)\n\n    window.addEventListener('orientationchange', orienteationchangeHandler)\n\n    return () => {\n      // detach to prevent memory leak\n      window.removeEventListener('orientationchange', orienteationchangeHandler)\n      map.off('load', onMapLoad)\n    }\n  }, [mapNode, mapObject, props.data])\n\n  const closeHandler = () => {\n    setShop(undefined)\n  }\n\n  return (\n    <div style={CSS}>\n      <div\n        ref={mapNode}\n        style={CSS}\n        data-geolocate-control=\"on\"\n        data-marker=\"off\"\n        data-gesture-handling=\"off\"\n      ></div>\n      {shop ?\n        <Shop shop={shop} close={closeHandler} />\n        :\n        <></>\n      }\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport Map from \"./Map\"\n\ntype Props = {\n  data: Pwamap.ShopData[];\n}\n\nconst Content = (props: Props) => {\n  return (\n    <><Map data={props.data} /></>\n  );\n};\n\nexport default Content;\n","import \"./ShopListItem.scss\";\nimport { Link } from \"react-router-dom\";\nimport { makeDistanceLabelText } from \"./distance-label\";\nimport {\n  Button,\n  Card,\n  CardActionArea,\n  CardActions,\n  CardContent,\n  CardMedia,\n  Typography,\n} from \"@material-ui/core\";\n\ntype Props = {\n  data: Pwamap.ShopData;\n  popupHandler: Function;\n  queryCategory: string | null;\n};\n\nconst Content = (props: Props) => {\n  const clickHandler = () => {\n    props.popupHandler(props.data);\n  };\n\n  const distanceTipText = makeDistanceLabelText(props.data.distance);\n  const category = props.data[\"カテゴリ\"];\n  const image = props.data[\"画像\"];\n\n  const isCategoryPage = props.queryCategory ? true : false;\n\n  return (\n    <>\n      <div className=\"shop-link\">\n        <Card sx={{ maxWidth: 345,bgcolor: '#36393f' }} >\n          <CardActionArea onClick={clickHandler}>\n            {image && (\n              <CardMedia\n                component=\"img\"\n                height=\"140\"\n                image={image}\n                alt={category}\n              />\n            )}\n            <CardContent>\n              <Typography gutterBottom variant=\"h5\" component=\"div\" color=\"common.white\">\n                {props.data[\"スポット名\"]}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                <span className=\"nowrap\">\n                  {distanceTipText && (\n                    <span className=\"distance\">\n                      現在位置から {distanceTipText}\n                    </span>\n                  )}\n                </span>\n              </Typography>\n            </CardContent>\n            <CardActions>\n              <Button size=\"small\">\n                {\" \"}\n                <Link to={`/list?category=${category}`}>\n                  {!isCategoryPage && (\n                    <span className=\"category\">{category}</span>\n                  )}\n                </Link>\n              </Button>\n            </CardActions>\n          </CardActionArea>\n        </Card>\n      </div>\n    </>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport ShopListItem from \"./ShopListItem\";\nimport Shop from \"./Shop\";\nimport \"./List.scss\";\nimport { useSearchParams } from \"react-router-dom\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { askGeolocationPermission } from \"../geolocation\";\nimport * as turf from \"@turf/turf\";\nimport { Typography } from \"@material-ui/core\";\n\ntype Props = {\n  data: Pwamap.ShopData[];\n};\n\nconst sortShopList = async (shopList: Pwamap.ShopData[]) => {\n  const currentPosition = await askGeolocationPermission();\n  if (currentPosition) {\n    const from = turf.point(currentPosition);\n    const sortingShopList = shopList.map((shop) => {\n      const lng = parseFloat(shop[\"経度\"]);\n      const lat = parseFloat(shop[\"緯度\"]);\n      if (Number.isNaN(lng) || Number.isNaN(lat)) {\n        return shop;\n      } else {\n        const to = turf.point([lng, lat]);\n        const distance = turf.distance(from, to, {\n          units: \"meters\" as \"meters\",\n        });\n        return { ...shop, distance };\n      }\n    });\n    sortingShopList.sort((a, b) => {\n      if (typeof a.distance !== \"number\" || Number.isNaN(a.distance)) {\n        return 1;\n      } else if (typeof b.distance !== \"number\" || Number.isNaN(b.distance)) {\n        return -1;\n      } else {\n        return a.distance - b.distance;\n      }\n    });\n    return sortingShopList;\n  } else {\n    return shopList;\n  }\n};\n\nconst Content = (props: Props) => {\n  const [shop, setShop] = React.useState<Pwamap.ShopData | undefined>();\n  const [data, setData] = React.useState<Pwamap.ShopData[]>(props.data);\n  const [list, setList] = React.useState<any[]>([]);\n  const [page, setPage] = React.useState(10);\n  const [hasMore, setHasMore] = React.useState(true);\n\n  const [searchParams] = useSearchParams();\n  const queryCategory = searchParams.get(\"category\");\n\n  React.useEffect(() => {\n    let data = props.data;\n\n    if (queryCategory) {\n      data = props.data.filter((shop) => {\n        return shop[\"カテゴリ\"] === queryCategory;\n      });\n    }\n\n    let isMounted = true;\n    // prevent memory leak\n    if (isMounted) {\n      const orderBy = process.env.REACT_APP_ORDERBY;\n\n      if (orderBy === \"distance\") {\n        sortShopList(data).then((sortedData) => {\n          // prevent memory leak\n          if (isMounted) {\n            setList(sortedData.slice(0, page));\n            setData(sortedData);\n          }\n        });\n      } else {\n        setList(data.slice(0, page));\n        setData(data);\n      }\n    }\n\n    return () => {\n      isMounted = false;\n    };\n  }, [props.data, queryCategory, page]);\n\n  const popupHandler = (shop: Pwamap.ShopData) => {\n    if (shop) {\n      setShop(shop);\n    }\n  };\n\n  const closeHandler = () => {\n    setShop(undefined);\n  };\n\n  //項目を読み込むときのコールバック\n  const loadMore = () => {\n    //データ件数が0件の場合、処理終了\n    if (list.length >= data.length) {\n      setHasMore(false);\n      return;\n    }\n\n    setList([...list, ...data.slice(page, page + 10)]);\n    setPage(page + 10);\n  };\n\n  const loader = (\n    <Typography\n      className=\"loader\"\n      variant=\"h5\"\n      key={0}\n      style={{\n        width: \"100%\",\n        height: \"200px\",\n        textAlign: \"center\",\n        position: \"relative\",\n        top: \"100px\",\n      }}\n    >\n      Now Loading...\n    </Typography>\n  );\n\n  return (\n    <div id=\"shop-list\" className=\"shop-list\">\n      {queryCategory && (\n        <div className=\"shop-list-category\">\n          <Typography\n            gutterBottom\n            variant=\"h6\"\n            component=\"div\"\n            color=\"common.white\"\n          >\n            {`Category：${queryCategory}`}\n          </Typography>\n        </div>\n      )}\n\n      <InfiniteScroll\n        dataLength={list.length}\n        next={loadMore}\n        hasMore={hasMore}\n        loader={loader}\n        scrollableTarget=\"shop-list\"\n      >\n        {list.map((item, index) => {\n          return (\n            <div key={index} className=\"shop\">\n              <ShopListItem\n                data={item}\n                popupHandler={popupHandler}\n                queryCategory={queryCategory}\n              />\n            </div>\n          );\n        })}\n      </InfiniteScroll>\n      {shop ? <Shop shop={shop} close={closeHandler} /> : <></>}\n    </div>\n  );\n};\n\nexport default Content;\n","export const askGeolocationPermission = () => {\n  return new Promise<Pwamap.LngLat | null>((resolve, reject) => {\n\n    if(!window.navigator.geolocation || !window.navigator.geolocation.getCurrentPosition) {\n      resolve(null)\n    }\n\n    window.navigator.geolocation.getCurrentPosition(\n      (pos) => {\n        const lat = pos.coords.latitude\n        const lng = pos.coords.longitude\n        resolve([lng, lat])\n      },\n      (error) => {\n        resolve(null)\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0\n      }\n    )\n  })\n}\n","import \"./AboutUs.scss\";\n// import config from '../config.json'\n// import { FaPlus } from 'react-icons/fa';\n\nconst Content = () => {\n  // const clickHandler = () => {\n  //   if (config.form_url) {\n  //     window.location.href = config.form_url\n  //   }\n  // }\n\n  return (\n    <div className=\"about-us\">\n      <div className=\"container\">\n        <div className=\"branding\">\n          <div className=\"image\">\n            <img src={`${process.env.PUBLIC_URL}/icon-pwamap.svg`} alt=\"\" />\n          </div>\n          <div className=\"logo\">JAPAN KRUMP FAM MAP</div>\n        </div>\n\n        <p>こちらのサービスはGeolonia PWAマップで作成しています</p>\n\n        <h2> Geolonia PWAマップについて</h2>\n        <p>\n          <a\n            href=\"https://blog.geolonia.com/2022/05/17/pwamap-beta.html\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            https://blog.geolonia.com/2022/05/17/pwamap-beta.html\n          </a>\n        </p>\n\n        <h2>当サイトについて</h2>\n        <p>\n          Geoloia\n          PWAマップのサービスが終了した場合、こちらのサービスも終了する可能性があります。\n        </p>\n        <p>\n          スマートフォンから見た場合、画像の表示が遅れる もしくは\n          表示されない可能性があります。\n        </p>\n        <h2>掲載情報について</h2>\n        <p>\n          入力フォームの入力内容に不備があった場合、データが反映されない場合があります。\n        </p>\n        <p>データの反映が少し遅れる場合があります。ご了承ください。</p>\n        <p>掲載情報の修正、削除については BWRS#1 までご連絡ください。</p>\n\n        {/* {config.form_url?\n          <>\n\n            <h2>データの更新について</h2>\n            <p>このアプリのデータを更新するには下の「 + 」ボタンを押してフォームに必要な情報を入力してください。</p>\n            <div className=\"goto-form\"><button><FaPlus color=\"#FFFFFF\" onClick={clickHandler} /></button></div>\n          </>\n          :\n          <></>\n        } */}\n      </div>\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport Select from 'react-select'\nimport { useNavigate } from 'react-router-dom';\nimport './Category.scss'\nimport { FormControl } from \"@material-ui/core\";\n\ntype Props = {\n  data: Pwamap.ShopData[];\n}\n\nconst Content = (props: Props) => {\n\n  const navigate = useNavigate();\n\n  const [categoryList, setCategoryList] = React.useState<string[]>([]);\n\n  React.useEffect(() => {\n\n    let categories: string[] = []\n\n    for (let i = 0; i < props.data.length; i++) {\n      const shop = props.data[i];\n\n      if (categories.indexOf(shop['カテゴリ']) === -1) {\n\n        categories.push(shop['カテゴリ'])\n      }\n\n    }\n\n    setCategoryList(categories)\n\n  }, [props.data])\n\n\n  return (\n    <>\n      {/* <div className=\"head\"></div> */}\n      <div className=\"category\">\n        <div className=\"container\">\n          <div className=\"category-item\">\n          <FormControl fullWidth>\n            <Select\n              onChange={(e) => {\n                if (e) {\n                  navigate(`/list?category=${e.value}`);\n                }\n              }}\n              options={\n                categoryList.map(category => {\n                  return {\n                    value: category,\n                    label: category\n                  }\n                })\n              }\n            />\n            </FormControl>\n          </div>\n\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Content;\n","import { useEffect, useState } from 'react'\nimport { ImageList, ImageListItem } from '@material-ui/core'\nimport Shop from './Shop'\nimport './Images.scss'\n\ntype Props = {\n  data: Pwamap.ShopData[];\n}\n\nconst Content = (props: Props) => {\n\n  const { data } = props;\n  const [validImageList, setValidImageList ] = useState<JSX.Element[]>([]);\n  const [shop, setShop] = useState<Pwamap.ShopData | undefined>()\n\n  const popupHandler = (shop: Pwamap.ShopData) => {\n    if (shop) {\n      setShop(shop)\n    }\n  }\n\n  const closeHandler = () => {\n    setShop(undefined)\n  }\n\n  useEffect(() => {\n\n    let imageListItems = []\n\n    for (let i = 0; i < data.length; i++) {\n      const item = data[i];\n\n      if (item['画像']) {\n\n        imageListItems.push(\n          <ImageListItem\n            key={i}\n            className=\"mui-image-list-item\"\n          >\n            <img\n              src={item['画像']}\n              alt={item['スポット名']}\n              loading=\"lazy\"\n              onClick={() => popupHandler(item)}\n              onError={e => {\n                //@ts-ignore\n                e.target.parentNode.remove()\n              }}\n            />\n          </ImageListItem>\n        )\n      }\n    }\n\n    setValidImageList(imageListItems)\n\n  }, [data])\n\n  return (\n    <>\n      {/* <div className=\"head\"></div> */}\n      <div className=\"images\">\n        <div className=\"container\">\n          <ImageList id=\"mui-image-list\" sx={{ width: \"100%\", height: \"100%\" }} cols={2} rowHeight={164}>\n            {validImageList}\n          </ImageList>\n          {shop ?\n            <Shop shop={shop} close={closeHandler} />\n            :\n            <></>\n          }\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Content;\n","import './AboutUs.scss'\n// import config from '../config.json'\n// import { FaPlus } from 'react-icons/fa';\n\nconst Content = () => {\n  // const clickHandler = () => {\n  //   if (config.form_url) {\n  //     window.location.href = config.form_url\n  //   }\n  // }\n\n\n  return (\n    <div className=\"about-us\">\n      <div className=\"container\">\n        <div className=\"branding\">\n          <div className=\"logo\">KRUMP KNOWLEDGE</div>\n        </div>\n\n        <p>Coming Soon...</p>\n      </div>\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./Tabbar.scss\";\n\nimport {\n  FaList,\n  FaHome,\n  FaSearch,\n  FaCamera,\n  FaStickyNote,\n} from \"react-icons/fa\";\nimport { AiOutlineAppstore } from \"react-icons/ai\";\nimport { IconButton } from \"@material-ui/core\";\n\nconst Content = () => {\n\n  // ボタンカラー用 定数\n  const theme = \"inherit\";\n\n  return (\n    <div className=\"tabbar\">\n      <ul>\n        <li>\n          <Link to=\"/\">\n            <IconButton color={theme} aria-label=\"Map\">\n              <FaHome />\n            </IconButton>\n            {/* <div className=\"text\">Map</div> */}\n          </Link>\n        </li>\n        <li>\n          <Link to=\"/list\">\n            <IconButton color={theme} aria-label=\"list\">\n              <FaList />\n            </IconButton>\n            {/* <div className=\"text\">List</div> */}\n          </Link>\n        </li>\n        <li>\n          <Link to=\"/category\">\n            <IconButton color={theme} aria-label=\"category\">\n              <FaSearch />\n            </IconButton>\n            {/* <div className=\"text\">Category</div> */}\n          </Link>\n        </li>\n        <li>\n          <Link to=\"/images\">\n            <IconButton color={theme} aria-label=\"images\">\n              <FaCamera />\n            </IconButton>\n            {/* <div className=\"text\">Search</div> */}\n          </Link>\n        </li>\n        <li>\n          <Link to=\"/knowledge\">\n            <IconButton color={theme} aria-label=\"knowledge\">\n              <FaStickyNote />\n            </IconButton>\n            {/* <div className=\"text\">Knowledge</div> */}\n          </Link>\n        </li>\n        <li>\n          <Link to=\"/about\">\n            <IconButton color={theme} aria-label=\"about\">\n              <AiOutlineAppstore />\n            </IconButton>\n            {/* <div className=\"text\">About</div> */}\n          </Link>\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nexport default Content;\n","const zen2han = (str: string) => {\n  return str.replace(/[！-～]/g, function (s: string) {\n    return String.fromCharCode(s.charCodeAt(0) - 0xFEE0);\n  }).replace(/　/g, ' ');\n}\n\nexport default zen2han;\n","import zen2han from \"./zen2han\";\n\nconst table2json = (table: Array<Array<string>>) => {\n  const header = table[0]\n  const records = table.slice(1)\n\n  return records.map((record: Array<string>) => {\n\n    const properties = header.reduce((prev: any, column: any) => {\n      const value = record[header.indexOf(column)];\n      prev[column] = zen2han(value || '');\n      return prev;\n    }, {});\n    return properties;\n  });\n\n}\n\nexport default table2json;\n","import React from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport \"./App.scss\";\n\nimport Home from './App/Home'\nimport List from './App/List'\nimport AboutUs from './App/AboutUs'\nimport Category from './App/Category'\nimport Images from './App/Images'\nimport Knowledge from \"./App/Knowledge\";\n\nimport Tabbar from './App/Tabbar'\nimport table2json from \"./lib/table2json\";\n\n// You can see config.json after running `npm start` or `npm run build`\n// import config from './config.json'\n\n\nconst sortShopList = async (shopList: Pwamap.ShopData[]) => {\n\n  // 新着順にソート\n  return shopList.sort(function (item1, item2) {\n    return Date.parse(item2['タイムスタンプ']) - Date.parse(item1['タイムスタンプ'])\n  });\n\n}\n\nconst App = () => {\n  const [shopList, setShopList] = React.useState<Pwamap.ShopData[]>([])\n\n  React.useEffect(() => {\n    fetch(`${process.env.PUBLIC_URL}/data.json?timestamp=${new Date().getTime()}`)\n      .then((response) => {\n        return response.ok ? response.text() : Promise.reject(response.status);\n      })\n      .then((fetchedData) => {\n\n        const data = JSON.parse(fetchedData)\n\n        if ('values' in data === false) {\n          console.log(\"No Data Found at Spreadsheet\")\n          setShopList([])\n          return\n        }\n\n        let features = table2json(data.values);\n\n        const nextShopList: Pwamap.ShopData[] = []\n        for (let i = 0; i < features.length; i++) {\n          const feature = features[i] as Pwamap.ShopData\n\n          if (!feature['緯度'] || !feature['経度'] || !feature['スポット名']) {\n            continue;\n          }\n          if (!feature['緯度'].match(/^-?[0-9]+(\\.[0-9]+)?$/)) {\n            continue\n          }\n          if (!feature['経度'].match(/^-?[0-9]+(\\.[0-9]+)?$/)) {\n            continue\n          }\n\n          const shop = {\n            ...feature,\n            index: i\n          }\n\n          nextShopList.push(shop)\n        }\n\n        sortShopList(nextShopList).then((sortedShopList) => {\n          setShopList(sortedShopList)\n        })\n\n      });\n  }, [])\n\n  // 海外対応\n  // React.useEffect(() => {\n  //   fetch(`${process.env.PUBLIC_URL}/data_other.json?timestamp=${new Date().getTime()}`)\n  //     .then((response) => {\n  //       return response.ok ? response.text() : Promise.reject(response.status);\n  //     })\n  //     .then((fetchedData) => {\n\n  //       const data = JSON.parse(fetchedData)\n\n  //       if ('values' in data === false) {\n  //         console.log(\"No Data Found at Spreadsheet\")\n  //         setShopList([])\n  //         return\n  //       }\n\n  //       let features = table2json(data.values);\n\n  //       const nextShopList: Pwamap.ShopData[] = []\n  //       for (let i = 0; i < features.length; i++) {\n  //         const feature = features[i] as Pwamap.ShopData\n\n  //         if (!feature['緯度'] || !feature['経度'] || !feature['スポット名']) {\n  //           continue;\n  //         }\n  //         if (!feature['緯度'].match(/^-?[0-9]+(\\.[0-9]+)?$/)) {\n  //           continue\n  //         }\n  //         if (!feature['経度'].match(/^-?[0-9]+(\\.[0-9]+)?$/)) {\n  //           continue\n  //         }\n\n  //         const shop = {\n  //           ...feature,\n  //           index: i\n  //         }\n\n  //         nextShopList.push(shop)\n  //       }\n\n  //       sortShopList(nextShopList).then((sortedShopList) => {\n  //         setShopList(sortedShopList)\n  //       })\n\n  //     });\n  // }, [])\n\n  return (\n    <div className=\"app\">\n      <div className=\"app-body\">\n        <Routes>\n          <Route path=\"/\" element={<Home data={shopList} />} />\n          <Route path=\"/list\" element={<List data={shopList} />} />\n          <Route path=\"/category\" element={<Category data={shopList} />} />\n          <Route path=\"/images\" element={<Images data={shopList} />} />\n          <Route path=\"/knowledge\" element={<Knowledge />} />\n          <Route path=\"/about\" element={<AboutUs />} />\n        </Routes>\n      </div>\n      <div className=\"app-footer\">\n        <Tabbar />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { useQRCode } from 'next-qrcode';\n\nfunction Qrcode(props: { url: string }) {\n\n  const { url } = props;\n  const { Canvas } = useQRCode();\n\n  return (\n    <Canvas\n      text={url}\n      options={{\n        type: 'image/png',\n        margin: 0,\n        width: 128\n      }}\n    />\n  );\n}\n\nexport default Qrcode;\n","import React from \"react\";\nimport { FacebookShareButton, LineShareButton, TwitterShareButton } from \"react-share\";\nimport { FacebookIcon, LineIcon, TwitterIcon } from \"react-share\";\nimport config from '../config.json'\n\nimport './Share.scss'\n\nconst Content = () => {\n  const url = window.location.href.replace(/\\?.+$/, '').replace(/#.+$/, '')\n\n  return (\n    <div className=\"share\">\n      <ul>\n        <li><a href=\"/\"><TwitterShareButton url={url} hashtags={[`${config.title}`]} title={`${config.title}`}><TwitterIcon size={32} round={true} /></TwitterShareButton></a></li>\n        <li><a href=\"/\"><FacebookShareButton url={url} hashtag={`#${config.title}`}><FacebookIcon size={32} round={true} /></FacebookShareButton></a></li>\n        <li><a href=\"/\"><LineShareButton url={url} title={`${config.title}`}><LineIcon size={32} round={true} /></LineShareButton></a></li>\n      </ul>\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport './About.scss'\nimport Qrcode from './Qrcode'\nimport Share from './App/Share'\n// import config from './config.json'\n\nconst Content = () => {\n  // const logoUrl = config.logo_image_url || `${process.env.PUBLIC_URL}/logo.svg`\n  return (\n    <div className=\"about\">\n      {/* <div className=\"branding\">\n        <img className=\"image\" src={logoUrl} alt=\"\"/>\n      </div>\n\n      <div className=\"description\">{config.description}</div> */}\n      <div className=\"qrcode\"><Qrcode url={window.location.href}/></div>\n      <Share />\n    </div>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\n\nimport App from './App'\nimport About from './About'\nimport './Container.scss'\n\nfunction Content() {\n  return (\n    <div className=\"outer-container\">\n      <div className=\"inner-container\">\n        <About />\n        <App />\n      </div>\n    </div>\n  );\n}\n\nexport default Content;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from \"react-router-dom\";\nimport Container from './Container';\nimport './index.scss'\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <Container />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}